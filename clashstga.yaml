# ---------------------------------------------------
# 1. åŸºç¡€è®¾ç½® (Based on your "åŸºç¡€" section)
# ---------------------------------------------------
port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: :9090

# DNS è®¾ç½®
dns:
  enable: true
  ipv6: false
  listen: :53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
    - "ac.ursusx.com" # ä½ ç‰¹åˆ«æŒ‡å®šçš„
  nameserver:
    - 114.114.114.114
    - 223.5.5.5

# ---------------------------------------------------
# 2. ç­–ç•¥ç»„ (Proxy Groups)
# ---------------------------------------------------
proxy-groups:
  # --- ä¸Šå±‚åŠŸèƒ½ç»„ (æ ¹æ®ä½ çš„ custom_proxy_group) ---
  
  - name: ğŸ‘½ AI
    type: select
    proxies: [DIRECT, æ‰€æœ‰-é€‰æ‹©, é¦™æ¸¯-è‡ªåŠ¨, å°æ¹¾-è‡ªåŠ¨, REJECT]

  - name: ğŸŒ å›½å¤–
    type: select
    proxies: [DIRECT, æ‰€æœ‰-é€‰æ‹©, é¦™æ¸¯-è‡ªåŠ¨, å°æ¹¾-è‡ªåŠ¨, REJECT]

  - name: ğŸ¬ Emby
    type: select
    proxies: [Emby-ä¸“ç”¨, DIRECT]

  - name: â¡ï¸ å›½å†…
    type: select
    proxies: [DIRECT, æ‰€æœ‰-é€‰æ‹©, é¦™æ¸¯-è‡ªåŠ¨, å°æ¹¾-è‡ªåŠ¨, REJECT]

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies: [DIRECT, æ‰€æœ‰-é€‰æ‹©, é¦™æ¸¯-è‡ªåŠ¨, å°æ¹¾-è‡ªåŠ¨, REJECT]

  # --- åº•å±‚åœ°åŒº/èŠ‚ç‚¹ç­›é€‰ç»„ ---

  - name: é¦™æ¸¯-è‡ªåŠ¨
    type: url-test
    include-all: true
    filter: "(?i)(é¦™æ¸¯|Hong Kong|HongKong)"
    tolerance: 50
    interval: 300

  - name: å°æ¹¾-è‡ªåŠ¨
    type: url-test
    include-all: true
    filter: "(?i)(Taiwan ISP)" # æ³¨æ„ï¼šä½ çš„æ­£åˆ™å†™çš„æ˜¯ Taiwan ISPï¼Œå¦‚æœèŠ‚ç‚¹åä¸å«æ­¤å…³é”®è¯å°†ç­›é€‰ä¸åˆ°
    tolerance: 50
    interval: 300

  - name: Emby-ä¸“ç”¨
    type: select
    include-all: true
    filter: "(?i)(Emby)"

  - name: æ‰€æœ‰-é€‰æ‹©
    type: select
    include-all: true
    filter: ".*"

# ---------------------------------------------------
# 3. è§„åˆ™é›†æä¾›è€… (Rule Providers)
# ---------------------------------------------------
rule-providers:
  # â¡ï¸ å›½å†…ç»„æº
  p_domestic_mydomain:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Blaine-Li/SomeDomain/master/Mydomain.list"
    path: ./rules/Mydomain.list
    interval: 86400

  p_domestic_lan:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list"
    path: ./rules/LocalAreaNetwork.list
    interval: 86400

  p_domestic_unban:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list"
    path: ./rules/UnBan.list
    interval: 86400

  p_domestic_chinadomain:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list"
    path: ./rules/ChinaDomain.list
    interval: 86400

  p_domestic_chinamedia:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list"
    path: ./rules/ChinaMedia.list
    interval: 86400

  p_domestic_companyip:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list"
    path: ./rules/ChinaCompanyIp.list
    interval: 86400
  
  p_domestic_chinaip:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list"
    path: ./rules/ChinaIp.list
    interval: 86400

  # ğŸ¬ Embyæº
  p_emby:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Blaine-Li/SomeDomain/master/Emby.list"
    path: ./rules/Emby.list
    interval: 86400

  # ğŸ‘½ AIæº (åˆå¹¶äº†ä½ åˆ—è¡¨ä¸­æŒ‡å‘ AI ç»„çš„æ‰€æœ‰ list)
  p_ai_1:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/AI.list"
    path: ./rules/AI.list
    interval: 86400
  p_ai_2:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Blaine-Li/SomeDomain/refs/heads/master/AI2.list"
    path: ./rules/AI2.list
    interval: 86400
  p_ai_twitter:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.list"
    path: ./rules/Twitter.list
    interval: 86400
  p_ai_whatsapp:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Whatsapp/Whatsapp.list"
    path: ./rules/Whatsapp.list
    interval: 86400
  p_ai_facebook:
    type: http
    behavior: classical
    url: "https://gist.githubusercontent.com/Blaine-Li/d954c04c3d6c763774915fbbfe1e94c2/raw/fb0ec120474451b276ce8f7a8d11042f61df59fa/Facebook.list"
    path: ./rules/Facebook.list
    interval: 86400
  p_ai_paypal:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/PayPal/PayPal.list"
    path: ./rules/PayPal.list
    interval: 86400

  # ğŸŒ å›½å¤–æº
  p_foreign_youtube:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list"
    path: ./rules/YouTube.list
    interval: 86400
  p_foreign_youtube_2:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/YouTube.list"
    path: ./rules/YouTube2.list
    interval: 86400
  p_foreign_hbo:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/HBO/HBO.list"
    path: ./rules/HBO.list
    interval: 86400
  p_foreign_disney:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.list"
    path: ./rules/Disney.list
    interval: 86400
  p_foreign_netflix:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list"
    path: ./rules/Netflix.list
    interval: 86400
  p_foreign_spotify:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list"
    path: ./rules/Spotify.list
    interval: 86400
  p_foreign_check:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Check.list"
    path: ./rules/Check.list
    interval: 86400
  p_foreign_proxy:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Proxy.list"
    path: ./rules/Proxy.list
    interval: 86400
  p_foreign_global:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list"
    path: ./rules/Global.list
    interval: 86400

# ---------------------------------------------------
#4. è§„åˆ™åŒ¹é… (Rules)
# ---------------------------------------------------
rules:
  # â¡ï¸ å›½å†…
  - RULE-SET,p_domestic_mydomain,â¡ï¸ å›½å†…
  - RULE-SET,p_domestic_lan,â¡ï¸ å›½å†…
  - RULE-SET,p_domestic_unban,â¡ï¸ å›½å†…
  - RULE-SET,p_domestic_chinadomain,â¡ï¸ å›½å†…
  - RULE-SET,p_domestic_chinamedia,â¡ï¸ å›½å†…
  - RULE-SET,p_domestic_companyip,â¡ï¸ å›½å†…
  - RULE-SET,p_domestic_chinaip,â¡ï¸ å›½å†…

  # ğŸ¬ Emby
  - RULE-SET,p_emby,ğŸ¬ Emby

  # ğŸ‘½ AI (åŒ…å«ä½ å½’ç±»åˆ°æ­¤ç»„çš„ Twitter/FB/Whatsapp ç­‰)
  - RULE-SET,p_ai_1,ğŸ‘½ AI
  - RULE-SET,p_ai_2,ğŸ‘½ AI
  - RULE-SET,p_ai_twitter,ğŸ‘½ AI
  - RULE-SET,p_ai_whatsapp,ğŸ‘½ AI
  - RULE-SET,p_ai_facebook,ğŸ‘½ AI
  - RULE-SET,p_ai_paypal,ğŸ‘½ AI

  # ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_youtube,ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_youtube_2,ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_hbo,ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_disney,ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_netflix,ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_spotify,ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_check,ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_proxy,ğŸŒ å›½å¤–
  - RULE-SET,p_foreign_global,ğŸŒ å›½å¤–

  # ğŸŸ æ¼ç½‘ä¹‹é±¼
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
